---
title: "Journal word counts over time"
author: "Will Hanley"
date: 2019-05-28
tags: [clunet, rdilc, bslc, plot, publishing, word count]
description: "Total word count is a good way to measure journal size. How do three different
  journals compare over time?"
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/d3/d3.min.js"></script>
<link href="/rmarkdown-libs/colorbrewer/colorbrewer.css" rel="stylesheet" />
<script src="/rmarkdown-libs/colorbrewer/colorbrewer.js"></script>
<link href="/rmarkdown-libs/streamgraph/streamgraph.css" rel="stylesheet" />
<script src="/rmarkdown-libs/streamgraph-binding/streamgraph.js"></script>


<p>The sixty million words in the first version of the international law corpus are distributed over time like this:
<div id="htmlwidget-1" class="streamgraph html-widget" style="width:672px;height:480px;"></div>
<div id="htmlwidget-3aee4c1948fade0e7291-legend" style="width:672" class="streamgraph html-widget-legend"><center><label style='padding-right:5px' for='htmlwidget-3aee4c1948fade0e7291-select'></label><select id='htmlwidget-3aee4c1948fade0e7291-select' style='visibility:hidden;'></select></center></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"data":{"key":["bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc","bslc","clunet","rdilc"],"value":[66492,0,275371,93099,0,309283,8947,0,307952,140464,0,316789,180507,0,308103,176579,153046,312865,187208,221847,304406,243166,227530,312410,231532,261494,270127,271726,290391,282881,219630,260577,285055,247220,265550,280482,232343,251612,276182,265495,317545,271807,242836,296737,259910,280178,302049,254038,283331,320346,258449,286930,333980,255478,207782,322720,258639,294575,357656,259382,310140,370536,262361,288445,395703,257118,253928,532051,266284,245606,506740,255541,220166,540858,255022,198317,471513,269518,308614,467888,257004,215396,447003,292221,217732,446810,290798,198259,463187,279271,224213,447004,232463,284204,436822,271164,193989,433426,272739,182426,442542,270323,178556,394711,263322,149945,418729,274133,159734,516897,290364,209421,526616,331093,172918,496982,299713,162012,523166,277291,172148,504275,294750,147465,550782,286246,183911,589750,267236,142281,536107,259981,154320,597343,278801,126187,572399,175272,141174,426371,0,146654,597198,0,172176,674838,0,167553,607591,0,143476,487341,0,77971,358535,0,99837,428291,232090,99123,440588,220786,118229,435468,301395,158036,471913,285137,159540,470112,373728,179996,460212,282883,151408,539027,274170,205704,530625,371073,212493,540455,325497,202201,509069,356510,229721,506011,320392,130906,498094,348145,182395,399980,291933,160268,398843,306771,183943,399222,337719,142403,377200,333131,157924,365607,319804,152542,374234,367387,154423,298062,342297],"date":["1869-01-01","1869-01-01","1869-01-01","1870-01-01","1870-01-01","1870-01-01","1871-01-01","1871-01-01","1871-01-01","1872-01-01","1872-01-01","1872-01-01","1873-01-01","1873-01-01","1873-01-01","1874-01-01","1874-01-01","1874-01-01","1875-01-01","1875-01-01","1875-01-01","1876-01-01","1876-01-01","1876-01-01","1877-01-01","1877-01-01","1877-01-01","1878-01-01","1878-01-01","1878-01-01","1879-01-01","1879-01-01","1879-01-01","1880-01-01","1880-01-01","1880-01-01","1881-01-01","1881-01-01","1881-01-01","1882-01-01","1882-01-01","1882-01-01","1883-01-01","1883-01-01","1883-01-01","1884-01-01","1884-01-01","1884-01-01","1885-01-01","1885-01-01","1885-01-01","1886-01-01","1886-01-01","1886-01-01","1887-01-01","1887-01-01","1887-01-01","1888-01-01","1888-01-01","1888-01-01","1889-01-01","1889-01-01","1889-01-01","1890-01-01","1890-01-01","1890-01-01","1891-01-01","1891-01-01","1891-01-01","1892-01-01","1892-01-01","1892-01-01","1893-01-01","1893-01-01","1893-01-01","1894-01-01","1894-01-01","1894-01-01","1895-01-01","1895-01-01","1895-01-01","1896-01-01","1896-01-01","1896-01-01","1897-01-01","1897-01-01","1897-01-01","1898-01-01","1898-01-01","1898-01-01","1899-01-01","1899-01-01","1899-01-01","1900-01-01","1900-01-01","1900-01-01","1901-01-01","1901-01-01","1901-01-01","1902-01-01","1902-01-01","1902-01-01","1903-01-01","1903-01-01","1903-01-01","1904-01-01","1904-01-01","1904-01-01","1905-01-01","1905-01-01","1905-01-01","1906-01-01","1906-01-01","1906-01-01","1907-01-01","1907-01-01","1907-01-01","1908-01-01","1908-01-01","1908-01-01","1909-01-01","1909-01-01","1909-01-01","1910-01-01","1910-01-01","1910-01-01","1911-01-01","1911-01-01","1911-01-01","1912-01-01","1912-01-01","1912-01-01","1913-01-01","1913-01-01","1913-01-01","1914-01-01","1914-01-01","1914-01-01","1915-01-01","1915-01-01","1915-01-01","1916-01-01","1916-01-01","1916-01-01","1917-01-01","1917-01-01","1917-01-01","1918-01-01","1918-01-01","1918-01-01","1919-01-01","1919-01-01","1919-01-01","1920-01-01","1920-01-01","1920-01-01","1921-01-01","1921-01-01","1921-01-01","1922-01-01","1922-01-01","1922-01-01","1923-01-01","1923-01-01","1923-01-01","1924-01-01","1924-01-01","1924-01-01","1925-01-01","1925-01-01","1925-01-01","1926-01-01","1926-01-01","1926-01-01","1927-01-01","1927-01-01","1927-01-01","1928-01-01","1928-01-01","1928-01-01","1929-01-01","1929-01-01","1929-01-01","1930-01-01","1930-01-01","1930-01-01","1931-01-01","1931-01-01","1931-01-01","1932-01-01","1932-01-01","1932-01-01","1933-01-01","1933-01-01","1933-01-01","1934-01-01","1934-01-01","1934-01-01","1935-01-01","1935-01-01","1935-01-01","1936-01-01","1936-01-01","1936-01-01","1937-01-01","1937-01-01","1937-01-01","1938-01-01","1938-01-01","1938-01-01","1939-01-01","1939-01-01","1939-01-01"]},"markers":null,"annotations":null,"offset":"zero","interactive":true,"interpolate":"cardinal","palette":"Spectral","text":"black","tooltip":"black","x_tick_interval":10,"x_tick_units":"year","x_tick_format":"%Y","y_tick_count":5,"y_tick_format":",g","top":20,"right":40,"bottom":30,"left":50,"legend":false,"legend_label":"","fill":"brewer","label_col":"black","x_scale":"date","sort":true,"order":"none"},"evals":[],"jsHooks":[]}</script></p>
<p>This graph distinguishes between three journals: the <em>Journal du droit international privé et de la jurisprudence comparée</em> (“clunet”, in yellow), the <em>Bulletin de la Société de législation comparée</em> (“bslc”, in orange), and the <em>Revue de droit international et de législation comparée</em> (“rdilc”, in green).</p>
<p>It shows a steady rise in overall publishing volume until the 1890s. From the beginning of the 1890s to the end of the 1920s, the total word count of these three journals typically hovered around one million per year. The influence of World War One is marked: the RDILC stopped publication altogether, while Clunet produced its largest volume in 1917. After 1930, overall word volume wanes.</p>
<p>This chart, which does not show a combined word count for the three journals, shows that the rise and fall in Clunet’s volume is largely responsible for the overall shape of the first graph.
<img src="/posts/2019-05-28-journals_files/figure-html/plot-1.png" width="672" /></p>
<p>Individual points represent the total words of each year, while the smoothing line indicates trajectory.</p>
<div id="underlying-code" class="section level2">
<h2>Underlying code</h2>
<p>These code blocks repeat the same steps for each of three journals. It might be good to figure out how to do all three in one step.</p>
<p>First, load text of all files</p>
<pre class="r"><code>library(xml2)

bslc_files &lt;- dir(&quot;~/GitHub/ilcorpus/journals/bslc/bslc-issues&quot;, full.names = TRUE)
bslc_text &lt;- c()
for (f in bslc_files) {
  bslc_text &lt;- c(bslc_text, gsub(&quot;\\s+&quot;, &quot; &quot;, paste(xml_text(xml_find_all(read_xml(f), &quot;//text()&quot;)), collapse=&quot; &quot;)))
}

clunet_files &lt;- dir(&quot;~/GitHub/ilcorpus/journals/clunet/clunet-issues&quot;, full.names = TRUE)
clunet_text &lt;- c()
for (f in clunet_files) {
  clunet_text &lt;- c(clunet_text, gsub(&quot;\\s+&quot;, &quot; &quot;, paste(xml_text(xml_find_all(read_xml(f), &quot;//text()&quot;)), collapse=&quot; &quot;)))
}

rdilc_files &lt;- dir(&quot;~/GitHub/ilcorpus/journals/rdilc/rdilc-issues&quot;, full.names = TRUE)
rdilc_text &lt;- c()
for (f in rdilc_files) {
  rdilc_text &lt;- c(rdilc_text, gsub(&quot;\\s+&quot;, &quot; &quot;, paste(xml_text(xml_find_all(read_xml(f), &quot;//text()&quot;)), collapse=&quot; &quot;)))
}</code></pre>
<p>Tokenize the words, then count them:</p>
<pre class="r"><code>library(tokenizers)

clunet_words &lt;- tokenize_words(clunet_text)
sapply(clunet_words, length)
bslc_words &lt;- tokenize_words(bslc_text)
sapply(bslc_words, length)
rdilc_words &lt;- tokenize_words(rdilc_text)
sapply(rdilc_words, length)</code></pre>
<p>I prepared separate metadata summaries about each journal, drawing year and date from the TEI header of each file. These summaries will probably be useful in future steps. For now, get and use date metadata about every issue:</p>
<pre class="r"><code>library(tidyverse)

bslc_metadata &lt;- read_csv(&quot;~/GitHub/ilcorpus/journals/bslc/bslc-summary.csv&quot;)
clunet_metadata &lt;- read_csv(&quot;~/GitHub/ilcorpus/journals/clunet/clunet-summary.csv&quot;)
rdilc_metadata &lt;- read_csv(&quot;~/GitHub/ilcorpus/journals/rdilc/rdilc-summary.csv&quot;)</code></pre>
<p>Now, produce a tibble for each journal, with each issue (there was more than one per year) its own observation. This tibble lists the issue, word count, and abbreviated title of the journal.</p>
<pre class="r"><code>bslc_word_count &lt;- tibble(year = bslc_metadata$year, words = sapply(bslc_words, length), journal = &quot;bslc&quot;)
clunet_word_count &lt;- tibble(year = clunet_metadata$year, words = sapply(clunet_words, length), journal = &quot;clunet&quot;)
rdilc_word_count &lt;- tibble(year = rdilc_metadata$year, words = sapply(rdilc_words, length), journal = &quot;clunet&quot;)</code></pre>
<p>Now cluster word counts by year:</p>
<pre class="r"><code>clunet_word_count_year &lt;- clunet_word_count %&gt;% 
  group_by(year) %&gt;% 
  summarise(words = sum(words), journal = &quot;clunet&quot;)
bslc_word_count_year &lt;- bslc_word_count %&gt;% 
  group_by(year) %&gt;% 
  summarise(words = sum(words), journal = &quot;bslc&quot;)
rdilc_word_count_year &lt;- rdilc_word_count %&gt;% 
  group_by(year) %&gt;% 
  summarise(words = sum(words), journal = &quot;rdilc&quot;)</code></pre>
<p>Put all three journals in a single tibble:</p>
<pre class="r"><code>journals_count &lt;- full_join(clunet_word_count_year, bslc_word_count_year)
journals_count &lt;- full_join(journals_count, rdilc_word_count_year)</code></pre>
<p>Plot the results as points and smoothing line</p>
<pre class="r"><code>p &lt;- ggplot(data = journals_count, mapping = aes(x = year, y = words, color = journal))
p + geom_point() + geom_smooth()</code></pre>
<p>Plot the results as a streamgraph:</p>
<pre class="r"><code>library(streamgraph)
streamgraph(journals_count, key=&quot;journal&quot;, value=&quot;words&quot;, date=&quot;year&quot;, offset=&quot;zero&quot;) </code></pre>
</div>
